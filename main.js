!function(){"use strict";var e={145:function(e,t,r){e.exports=r.p+"418980fdb81d7ceb84cc.jpg"},195:function(e,t,r){e.exports=r.p+"da7ae2ac910426f62176.jpg"},837:function(e,t,r){e.exports=r.p+"b431bbb397d7a39486fd.jpg"},713:function(e,t,r){e.exports=r.p+"44b92084d1c40cb0a70b.jpg"},574:function(e,t,r){e.exports=r.p+"ac218ab8ae2c025add31.jpg"},129:function(e,t,r){e.exports=r.p+"f37cd48ce187723b17f6.jpg"}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var c=t[o]={exports:{}};return e[o](c,c.exports,r),c.exports}r.m=e,r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.b=document.baseURI||self.location.href,function(){const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button-submit",inactiveButtonClass:"modal__button-submit_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__input_error_visible"},t=(e,t,r)=>{const o=e.querySelector(`#${t.id}-error`);o.textContent="",o.classList.remove(r.errorClass),t.classList.remove(r.inputErrorClass)},o=(e,t,r)=>{(e=>e.some((e=>!e.validity.valid)))(e)?c(t,r):n(t,r)},n=(e,t)=>{e.classList.remove(t.inactiveButtonClass),e.disabled=!1},c=(e,t)=>{e.classList.add(t.inactiveButtonClass),e.disabled=!0};new URL(r(145),r.b),new URL(r(195),r.b),new URL(r(837),r.b),new URL(r(713),r.b),new URL(r(574),r.b),new URL(r(129),r.b),new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}getAppInfo(){return Promise.all([this.getInitialCards()])}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>{if(e.ok)return e.json();Promise.reject(`Error: ${e.status}`)}))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"7cf900fc-9f66-4afe-b1f0-09f480f95933","Content-Type":"application/json"}}).getAppInfo().then((e=>{e.forEach((e=>{const t=k(e);E.prepend(t)}))})).catch(console.error);const a=document.querySelector(".profile__edit-btn"),l=document.querySelectorAll(".modal__button-close"),s=document.querySelector(".profile__name"),i=document.querySelector(".profile__description"),d=document.querySelector("#edit-modal"),u=document.querySelector("#profile-name-input"),m=document.querySelector("#profile-description-input"),p=document.querySelector("#profile-form");function f(e){"Escape"===e.key&&b(document.querySelector(".modal_opened"))}function _(e){e.classList.add("modal_opened"),document.addEventListener("keydown",f)}function b(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",f)}document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("mousedown",(t=>{(t.target.classList.contains("modal")||t.target.classList.contains("modal__button-close"))&&b(e)}))})),a.addEventListener("click",(()=>{var r,o;u.value=s.textContent,m.value=i.textContent,r=p,o=e,[u,m].forEach((e=>{t(r,e,o)})),_(d)})),p.addEventListener("submit",(function(e){e.preventDefault(),s.textContent=u.value,i.textContent=m.value,b(d)}));const v=document.querySelector(".profile__new-post-btn"),y=document.querySelector("#add-card-form"),S=document.querySelector("#profile-add-card-link-input"),q=document.querySelector("#profile-add-card-caption-input"),L=document.querySelector("#add-card-modal");v.addEventListener("click",(()=>{_(L)})),y.addEventListener("submit",(function(t){t.preventDefault();const r=k({name:q.value,link:S.value});E.prepend(r),b(L),y.reset(),c(t.submitter,e)}));const h=document.querySelector("#card-template"),E=document.querySelector(".cards__list"),C=document.querySelector("#card-preview-modal"),g=document.querySelector(".modal__image-preview"),x=document.querySelector(".modal__image-caption");function k(e){const t=h.content.querySelector(".card").cloneNode(!0),r=t.querySelector(".card__title"),o=t.querySelector(".card__image"),n=t.querySelector(".card__like-button"),c=t.querySelector(".card__delete-button");return r.textContent=e.name,o.src=e.link,o.alt=e.name,n.addEventListener("click",(()=>{n.classList.toggle("card__like-button_liked")})),c.addEventListener("click",(()=>{t.remove()})),o.addEventListener("click",(()=>{g.src=e.link,g.alt=e.name,x.textContent=e.name,_(C)})),t}var w;l.forEach((e=>{e.addEventListener("click",(()=>{b(e.closest(".modal"))}))})),w=e,document.querySelectorAll(w.formSelector).forEach((e=>{((e,r)=>{const n=Array.from(e.querySelectorAll(r.inputSelector)),c=e.querySelector(r.submitButtonSelector);o(n,c,r),n.forEach((a=>{a.addEventListener("input",(function(){((e,r,o)=>{r.validity.valid?t(e,r,o):((e,t,r,o)=>{const n=e.querySelector(`#${t.id}-error`);n.textContent=r,n.classList.add(o.errorClass),t.classList.add(o.inputErrorClass)})(e,r,r.validationMessage,o)})(e,a,r),o(n,c,r)}))}))})(e,w)}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UyxLQUUvQkgsRUFEY2tDLEVBQU9DLFFBQVEsVUFDWixHQUNqQixJRC9Jc0IvRixFQ2tKVFYsRURqSkVMLFNBQVNpRSxpQkFBaUJsRCxFQUFPVCxjQUN6Q2dELFNBQVN6QyxJQWpCTWtHLEVBQUNsRyxFQUFhRSxLQUN0QyxNQUFNUSxFQUFZeUYsTUFBTUMsS0FDdEJwRyxFQUFZb0QsaUJBQWlCbEQsRUFBT1IsZ0JBRWhDaUIsRUFBZ0JYLEVBQVlJLGNBQWNGLEVBQU9QLHNCQUN2RGMsRUFBa0JDLEVBQVdDLEVBQWVULEdBRTVDUSxFQUFVK0IsU0FBU3hDLElBQ2pCQSxFQUFhZ0UsaUJBQWlCLFNBQVMsV0FuRGhCb0MsRUFBQ3JHLEVBQWFDLEVBQWNDLEtBQ2hERCxFQUFhWSxTQUFTQyxNQVF6QmYsRUFBZUMsRUFBYUMsRUFBY0MsR0F2QnZCb0csRUFBQ3RHLEVBQWFDLEVBQWNzRyxFQUFjckcsS0FDL0QsTUFBTUMsRUFBZUgsRUFBWUksY0FBYyxJQUFJSCxFQUFhSSxZQUNoRUYsRUFBYUcsWUFBY2lHLEVBQzNCcEcsRUFBYUksVUFBVVksSUFBSWpCLEVBQU9KLFlBQ2xDRyxFQUFhTSxVQUFVWSxJQUFJakIsRUFBT0wsZ0JBQWdCLEVBWWhEeUcsQ0FDRXRHLEVBQ0FDLEVBQ0FBLEVBQWF1RyxrQkFDYnRHLEVBSUosRUEwQ0ltRyxDQUFtQnJHLEVBQWFDLEVBQWNDLEdBQzlDTyxFQUFrQkMsRUFBV0MsRUFBZVQsRUFDOUMsR0FBRSxHQUNGLEVBTUFnRyxDQUFrQmxHLEVBQWFFLEVBQU8sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvdXRpbHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5iID0gZG9jdW1lbnQuYmFzZVVSSSB8fCBzZWxmLmxvY2F0aW9uLmhyZWY7XG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0MTc5OiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG4vLyBubyBvbiBjaHVua3MgbG9hZGVkXG5cbi8vIG5vIGpzb25wIGZ1bmN0aW9uIiwiY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uLXN1Ym1pdFwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b24tc3VibWl0X2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF9lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UsIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmVycm9yQ2xhc3MpO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5lcnJvckNsYXNzKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG59O1xuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoXG4gICAgICBmb3JtRWxlbWVudCxcbiAgICAgIGlucHV0RWxlbWVudCxcbiAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSxcbiAgICAgIGNvbmZpZ1xuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgfVxufTtcblxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICB9KTtcbn07XG5cbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgIGRpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBlbmFibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgfVxufTtcblxuY29uc3QgZW5hYmxlQnV0dG9uID0gKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG59O1xuXG5jb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbn07XG5cbmNvbnN0IHJlc2V0VmFsaWRhdGlvbiA9IChmb3JtRWxlbWVudCwgaW5wdXRMaXN0LCBjb25maWcpID0+IHtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0LCBjb25maWcpO1xuICB9KTtcbn07XG5cbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbGVtZW50LCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICApO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG5cbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBjb25maWcpO1xuICB9KTtcbn07XG5cbmV4cG9ydCB7IGVuYWJsZVZhbGlkYXRpb24sIHJlc2V0VmFsaWRhdGlvbiwgZGlzYWJsZUJ1dHRvbiwgc2V0dGluZ3MgfTtcbiIsImltcG9ydCB7XG4gIGVuYWJsZVZhbGlkYXRpb24sXG4gIHJlc2V0VmFsaWRhdGlvbixcbiAgZGlzYWJsZUJ1dHRvbixcbiAgc2V0dGluZ3MsXG59IGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcblxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xuXG5jb25zdCBpbWcxID0gbmV3IFVSTChcbiAgXCIuLi9pbWFnZXMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIGltcG9ydC5tZXRhLnVybFxuKTtcbmNvbnN0IGltZzIgPSBuZXcgVVJMKFxuICBcIi4uL2ltYWdlcy8yLXBob3RvLWJ5LWNlaWxpbmUtZnJvbS1wZXhlbHMuanBnXCIsXG4gIGltcG9ydC5tZXRhLnVybFxuKTtcbmNvbnN0IGltZzMgPSBuZXcgVVJMKFxuICBcIi4uL2ltYWdlcy8zLXBob3RvLWJ5LXR1YmFudXItZG9nYW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIGltcG9ydC5tZXRhLnVybFxuKTtcbmNvbnN0IGltZzQgPSBuZXcgVVJMKFxuICBcIi4uL2ltYWdlcy80LXBob3RvLWJ5LW1hdXJpY2UtbGFzY2hldC1mcm9tLXBleGVscy5qcGdcIixcbiAgaW1wb3J0Lm1ldGEudXJsXG4pO1xuY29uc3QgaW1nNSA9IG5ldyBVUkwoXG4gIFwiLi4vaW1hZ2VzLzUtcGhvdG8tYnktdmFuLWFuaC1uZ3V5ZW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIGltcG9ydC5tZXRhLnVybFxuKTtcbmNvbnN0IGltZzYgPSBuZXcgVVJMKFxuICBcIi4uL2ltYWdlcy82LXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgaW1wb3J0Lm1ldGEudXJsXG4pO1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1DQVJEUyBBUlJBWS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJKb3NlcGgsIE9SXCIsXG4gICAgbGluazogaW1nMSxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiT3JlZ29uIENvYXN0XCIsXG4gICAgbGluazogaW1nMixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVHVtYWxvIEZhbGxzLCBPUlwiLFxuICAgIGxpbms6IGltZzMsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkNlbnRyYWwgT3JlZ29uIENhc2NhZGUgUmFuZ2VcIixcbiAgICBsaW5rOiBpbWc0LFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNdWx0bm9tYWggRmFsbHMsIE9SXCIsXG4gICAgbGluazogaW1nNSxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiU291dGhlcm4gT3JlZ29uXCIsXG4gICAgbGluazogaW1nNixcbiAgfSxcbl07XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLSBJbnN0YW50aWF0aW5nIHRoZSBBUEkgY2xhc3MgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjdjZjkwMGZjLTlmNjYtNGFmZS1iMWYwLTA5ZjQ4MGY5NTkzM1wiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmFwaVxuICAuZ2V0QXBwSW5mbygpXG4gIC50aGVuKChjYXJkcykgPT4ge1xuICAgIGNhcmRzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaXRlbSk7XG4gICAgICBjYXJkc0xpc3QucHJlcGVuZChjYXJkRWxlbWVudCk7XG4gICAgfSk7XG4gIH0pXG4gIC5jYXRjaChjb25zb2xlLmVycm9yKTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLU9QRU4vQ0xPU0UgTU9EVUxFIChFZGl0IFByb2ZpbGUpLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XG5jb25zdCBtb2RhbENsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2J1dHRvbi1jbG9zZVwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1tb2RhbFwiKTtcbmNvbnN0IGVkaXRNb2RhbE5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xuY29uc3QgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWZvcm1cIik7XG5jb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIik7XG5cbm1vZGFsLmZvckVhY2goKG1vZGFsKSA9PiB7XG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgIGlmIChcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikgfHxcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2J1dHRvbi1jbG9zZVwiKVxuICAgICkge1xuICAgICAgY2xvc2VNb2RhbChtb2RhbCk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVFc2NhcGUoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3QgYWN0aXZlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5lZFwiKTtcbiAgICBjbG9zZU1vZGFsKGFjdGl2ZU1vZGFsKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGUpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gZWRpdE1vZGFsTmFtZUlucHV0LnZhbHVlO1xuICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlO1xuICBjbG9zZU1vZGFsKGVkaXRNb2RhbCk7XG59XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICByZXNldFZhbGlkYXRpb24oXG4gICAgcHJvZmlsZUZvcm0sXG4gICAgW2VkaXRNb2RhbE5hbWVJbnB1dCwgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dF0sXG4gICAgc2V0dGluZ3NcbiAgKTtcbiAgb3Blbk1vZGFsKGVkaXRNb2RhbCk7XG59KTtcblxucHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS1PUEVOL0NMT1NFIE1PRFVMRSAoQUREIENBUkQpLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuY29uc3QgcHJvZmlsZU5ld1Bvc3RCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25ldy1wb3N0LWJ0blwiKTtcbmNvbnN0IHByb2ZpbGVBZGRDYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtZm9ybVwiKTtcbmNvbnN0IGFkZENhcmRMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWNhcmQtbGluay1pbnB1dFwiKTtcbmNvbnN0IGFkZENhcmRDYXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWFkZC1jYXJkLWNhcHRpb24taW5wdXRcIlxuKTtcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IGlucHV0VmFsdWVzID0ge1xuICAgIG5hbWU6IGFkZENhcmRDYXB0aW9uSW5wdXQudmFsdWUsXG4gICAgbGluazogYWRkQ2FyZExpbmtJbnB1dC52YWx1ZSxcbiAgfTtcblxuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGlucHV0VmFsdWVzKTtcbiAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xuICBjbG9zZU1vZGFsKGFkZENhcmRNb2RhbCk7XG4gIHByb2ZpbGVBZGRDYXJkRm9ybS5yZXNldCgpO1xuICBkaXNhYmxlQnV0dG9uKGV2dC5zdWJtaXR0ZXIsIHNldHRpbmdzKTtcbn1cblxucHJvZmlsZU5ld1Bvc3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKGFkZENhcmRNb2RhbCk7XG59KTtcblxucHJvZmlsZUFkZENhcmRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tQ0FSRCBURU1QTEFURVMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5jb25zdCBtb2RhbFByZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtcHJldmlldy1tb2RhbFwiKTtcbmNvbnN0IG1vZGFsSW1hZ2VQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtcHJldmlld1wiKTtcbmNvbnN0IG1vZGFsQ2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLWNhcHRpb25cIik7XG5cbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY29udGVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gIGNvbnN0IGNhcmROYW1lRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICBjb25zdCBjYXJkSW1hZ2VFbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gIGNvbnN0IGNhcmRMaWtlQnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgY29uc3QgY2FyZERlbGV0ZUJ0biA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcblxuICBjYXJkTmFtZUVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICBjYXJkSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZUVsLmFsdCA9IGRhdGEubmFtZTtcblxuICBjYXJkTGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRMaWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9saWtlZFwiKTtcbiAgfSk7XG5cbiAgY2FyZERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xuICB9KTtcblxuICAvLyBjYXJkIG1vZGFsIHByZXZpZXcgb3BlblxuICBjYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIG1vZGFsSW1hZ2VQcmV2aWV3LnNyYyA9IGRhdGEubGluaztcbiAgICBtb2RhbEltYWdlUHJldmlldy5hbHQgPSBkYXRhLm5hbWU7XG4gICAgbW9kYWxDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuXG4gICAgb3Blbk1vZGFsKG1vZGFsUHJldmlldyk7XG4gIH0pO1xuXG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuLy8gLS0tLS0tIG1vZGFsIGNsb3NlIGJ1dHRvbiAtLS0tLS1cbm1vZGFsQ2xvc2VCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjb25zdCBtb2RhbCA9IGJ1dHRvbi5jbG9zZXN0KFwiLm1vZGFsXCIpO1xuICAgIGNsb3NlTW9kYWwobW9kYWwpO1xuICB9KTtcbn0pO1xuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiIsIi8vIHV0aWxzL0FwaS5qc1xuXG5jbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgZ2V0QXBwSW5mbygpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0SW5pdGlhbENhcmRzKCldKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuXG4gICAgLy8gb3RoZXIgbWV0aG9kcyBmb3Igd29ya2luZyB3aXRoIHRoZSBBUElcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcGk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwibyIsIm9iaiIsInByb3AiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJwIiwiYiIsImRvY3VtZW50IiwiYmFzZVVSSSIsInNlbGYiLCJsb2NhdGlvbiIsImhyZWYiLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImNvbmZpZyIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiZW5hYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJhZGQiLCJVUkwiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoaXMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiZ2V0QXBwSW5mbyIsIlByb21pc2UiLCJhbGwiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJyZWplY3QiLCJzdGF0dXMiLCJhdXRob3JpemF0aW9uIiwiY2FyZHMiLCJmb3JFYWNoIiwiaXRlbSIsImNhcmRFbGVtZW50IiwiZ2V0Q2FyZEVsZW1lbnQiLCJjYXJkc0xpc3QiLCJwcmVwZW5kIiwiY2F0Y2giLCJjb25zb2xlIiwiZXJyb3IiLCJwcm9maWxlRWRpdEJ1dHRvbiIsIm1vZGFsQ2xvc2VCdXR0b25zIiwicXVlcnlTZWxlY3RvckFsbCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiZWRpdE1vZGFsIiwiZWRpdE1vZGFsTmFtZUlucHV0IiwiZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVGb3JtIiwiaGFuZGxlRXNjYXBlIiwiZXZ0Iiwia2V5IiwiY2xvc2VNb2RhbCIsIm9wZW5Nb2RhbCIsIm1vZGFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjb250YWlucyIsInJlc2V0VmFsaWRhdGlvbiIsInZhbHVlIiwiaW5wdXQiLCJwcmV2ZW50RGVmYXVsdCIsInByb2ZpbGVOZXdQb3N0QnV0dG9uIiwicHJvZmlsZUFkZENhcmRGb3JtIiwiYWRkQ2FyZExpbmtJbnB1dCIsImFkZENhcmRDYXB0aW9uSW5wdXQiLCJhZGRDYXJkTW9kYWwiLCJuYW1lIiwibGluayIsInJlc2V0Iiwic3VibWl0dGVyIiwiY2FyZFRlbXBsYXRlIiwibW9kYWxQcmV2aWV3IiwibW9kYWxJbWFnZVByZXZpZXciLCJtb2RhbENhcHRpb24iLCJkYXRhIiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmROYW1lRWwiLCJjYXJkSW1hZ2VFbCIsImNhcmRMaWtlQnRuIiwiY2FyZERlbGV0ZUJ0biIsInNyYyIsImFsdCIsInRvZ2dsZSIsImJ1dHRvbiIsImNsb3Nlc3QiLCJzZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9